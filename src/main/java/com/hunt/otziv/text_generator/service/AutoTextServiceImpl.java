package com.hunt.otziv.text_generator.service;

import com.hunt.otziv.b_bots.model.Bot;
import com.hunt.otziv.b_bots.services.BotService;
import com.hunt.otziv.c_categories.dto.CategoryDTO;
import com.hunt.otziv.c_categories.dto.SubCategoryDTO;
import com.hunt.otziv.c_categories.model.Category;
import com.hunt.otziv.c_categories.model.SubCategory;
import com.hunt.otziv.c_categories.services.CategoryService;
import com.hunt.otziv.c_categories.services.SubCategoryService;
import com.hunt.otziv.c_companies.dto.CompanyDTO;
import com.hunt.otziv.c_companies.dto.FilialDTO;
import com.hunt.otziv.c_companies.model.Filial;
import com.hunt.otziv.c_companies.services.FilialService;
import com.hunt.otziv.p_products.dto.OrderDTO;
import com.hunt.otziv.p_products.model.OrderDetails;
import com.hunt.otziv.r_review.model.Review;
import com.hunt.otziv.r_review.services.ReviewService;
import com.hunt.otziv.text_generator.dto.PromptDTO;
import com.hunt.otziv.text_generator.service.parser.WebsiteParserService;
import com.hunt.otziv.text_generator.service.toGPT.ReviewGeneratorService;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Service;

import java.math.BigDecimal;
import java.security.SecureRandom;
import java.util.*;
@Service
@Slf4j
@RequiredArgsConstructor
public class AutoTextServiceImpl implements AutoTextService{

    private final ReviewService reviewService;
    private final ReviewGeneratorService reviewGeneratorService;
    private final BotService botService;
    private final CategoryService categoryService;
    private final SubCategoryService subCategoryService;
    private final FilialService filialService;
    private final WebsiteParserService websiteParserService;


//==================================== НАСТРОЙКИ ТЕКСТОВ - НАЧАЛО ==================================================

    List<String> sex = List.of(
        "Мужчина", "Женщина", "Парень", "Девушка"
    );

    List<String> olds = List.of(
        "18", "20", "22", "24", "26", "28", "30", "32", "34", "36", "38", "40", "42", "44", "46", "48", "50", "52", "54", "56", "58", "60", "62", "64", "66", "68", "70", "72", "74", "76", "78", "80", "82", "84", "86", "88", "90", "92", "94", "96", "98"
    );

    List<String> proffesion = List.of(
            "Работник (наёмный сотрудник)",
            "Предприниматель / Самозанятый",
            "Безработный",
            "Пенсионер",
            "Студент",
            "Школьник",
            "Домохозяйка / домохозяин",
            "Военнослужащий",
            "Государственный служащий",
            "Фрилансер"
    );

    List<String> socialStatus = List.of(
            "Холост / Незамужняя",
            "Женат / Замужем",
            "В разводе",
            "Вдовец / Вдова",
            "Гражданский брак"
    );

    List<String> education = List.of(
            "Без образования",
            "Среднее общее",
            "Среднее специальное",
            "Неполное высшее",
            "Высшее образование",
            "Ученая степень (кандидат наук, доктор наук)"
    );

    List<String> finance = List.of(
            "Низкий доход",
            "Средний доход",
            "Высокий доход"
    );

    List<String> styleOfSpeech = List.of(
            "Разговорный стиль",
            "Научный стиль",
            "Простой разговорный стиль",
            "Официально-деловой стиль",
            "Простой разговорный стиль",
            "Публицистический стиль",
            "Разговорный стиль",
            "Художественный стиль",
            "Гоповатый, хомоватый стиль",
            "Простой разговорный стиль",
            "Юморной стиль",
            "Безграмотный стиль"
    );


//    List<String> lengthText = List.of(
//            "Максимально короткий. 1–2 предложения (50–100 знаков)",
//            "Короткий. 2–3 предложения (100–150 знаков)" ,
//            "Средней длины 3–5 предложений (200–400 знаков)",
//            "Максимально короткий. 1–2 предложения (50–100 знаков)",
//            "Короткий. 2–3 предложения (100–150 знаков)" ,
//            "Длинный, развернутый 5–8 предложений (400–700 знаков)",
//            "Короткий. 2–3 предложения (100–150 знаков)" ,
//            "Очень длинный, 8+ предложений (700–1200 знаков)",
//            "Максимально короткий. 1–2 предложения (50–100 знаков)",
//            "История\tОт 1200 до 2000+ знаков, с деталями и сюжетом (можно от первого лица или с мини-драмой)",
//            "1,2 предложения не больше",
//            "Максимально короткий. 1–2 предложения (50–100 знаков)",
//            "1-2 абзаца",
//            "Максимально короткий"
//    );

    List<String> gargon = List.of(
            "жесть",
            "улёт",
            "капец",
            "вкуснятина",
            "офигеть",
            "клёво",
            "доволен как слон",
            "обалдеть",
            "классный",
            "четкий",
            "клёвый",
            "суперский",
            "опупенный",
            "обалденный",
            "норм",
            "че",
            "шиш с маслом"
    );

    List<String> structure = List.of(
            "Самую простую структуру, буквально 4-5 слов в отзыве" + " " +
                    "Пример: Спасибо, были там-то, понравилось. Или - Большой выбор парфюмерии. Можно купить любой объем. Класс",
            "Простую структуру, буквально 5-10 слов в отзыве" +
                    " Пример: Все прошло гладко! Организовали праздник хорошо, развлечения детям понравились, все остались  в довольны.",
            "Упрощенную структуру, буквально 10-15 слов в отзыве" +
                    " Пример: Спасибо за помощь в таком непростом деле!!! Продолжайте в том же духе и пусть всё у вас будет хорошо! Еще пример : Сам не местный, коллеги рассказывали про Жаровню - вкусно )\n" + "Не обманули)\n" + "Все понравилось. Еду принесли быстро, все свежее, горячее. Обслуживала Екатерина, понравилось!",

            "Среднюю структуру, буквально 15-25 слов в отзыве" +
                    " Пример: брали полный пансион на Мальдивах, (отель Arena beach hotel),  по приезду нам вручили приветственные коктейли. Уборка, сервис, бассейны, транспорт \uD83D\uDC4D!  А закаты!!! Закаты просто фантастика!!! Если не были на мальдивах, то вы еще ни разу не были по настоящему в отпуске! Вышло 160 тысяч. Или еще пример - Очень приятен  в общении Артем.  Грамотен и очень интересно рассказывает про парфюмерные бренды.Приобрела известный и любимый многим аромат Baccarat 540. Или еще пример - Всё отлично, обслуживание супер. Официант замечательная (кажется Ольга! Быстро приняла у нас заказ, была очень вежлива. Еда вкусная и сытная! Кушали шашлычки с микс тарелочкой из Печенья овощей .картошечка на УГЛЯХ и грибочки.Обязательно придем еще.",
            "Расширенную структуру, буквально 25-50 слов в отзыве" +
                    " Пример: Хотели поехать в  очередной раз в  Тайланд, так как это приемлемо по бюджету, но в компании нам предложили слетать на мальдивы!!! Сперва рассмеялись, ведь на олигархов мы мало позожи))). Но оказывается на мальдивы можно слетать бюджетно, но не чуть не хуже чем богачи!!! Подобрали нам отель Arena beach hotel на острове Мафуши. С завтраками 12 тысяч ночь!! 12 на настоящих мальдивах!!! Это было невероятно. Запомнится на всю жизнь!! Спасибо-спасибо-спасибо. Всем очень советую! Ребята действительно дарят радость по карману!",

            "Самую простую структуру, буквально 4-5 слов в отзыве" + " " +
                    "Пример: Спасибо, были там-то, понравилось. Или - Большой выбор парфюмерии. Можно купить любой объем. Класс",
            "Простую структуру, буквально 5-10 слов в отзыве" +
                    " Пример: Все прошло гладко! Организовали праздник хорошо, развлечения детям понравились, все остались  в довольны.",
            "Упрощенную структуру, буквально 10-15 слов в отзыве" +
                    " Пример: Спасибо за помощь в таком непростом деле!!! Продолжайте в том же духе и пусть всё у вас будет хорошо! Еще пример : Сам не местный, коллеги рассказывали про Жаровню - вкусно )\n" + "Не обманули)\n" + "Все понравилось. Еду принесли быстро, все свежее, горячее. Обслуживала Екатерина, понравилось!",

            "Большую структуру, 50-150 слов в отзыве" +
                    " Пример: Со школы не рисковал с прической, боялся подстричься как-то не так и потом выглядеть  дурачком, пока волосы не отрастут или налысо не подстригусь. И вот спустя 30 годков  открылся барбершоп в доме, дороже обычных парикмахерских, но зато ходить никуда не нужно. Посмотрел на мастеров, посмотрел на клиентов  и раз на третий уговорили меня сменить имидж. Получилось очень круто! Теперь конечно ухаживать приходится и начинаю конкурировать с женой за место баночек на полке, но действительно оно того стоит. Моложе и солиднее стал выглядеть, Спасибо",
            "Увеличенную структуру, 150-250 слов в отзыве" +
                    " Пример: Квесты — это вообще отдельный разговор. \uD83E\uDD2F Мы выбрали \"Гарри Поттера\", и дети были просто в восторге. Все в мантиях и с волшебными палочками — как в фильме, прям! Аниматор так мастерски вёл игру, что даже взрослые втянулись. Фотограф тоже порадовал, сделал классные снимки, которые теперь украшают наш семейный альбом. \uD83C\uDF70 Еда тоже была на уровне — пицца, крылышки и всё такое. В общем, день прошёл на ура, и я точно знаю, что следующий праздник будем отмечать только здесь. Не думала, что всё окажется таким классным! \uD83D\uDE4C\n",
            "Огромную структуру, более 250 слов в отзыве" +
                    " Пример: Ну, это была интересная история. Сначала я немного паниковала, потому что обычный подарок на день рождения уже не казался хорошей идеей. Хотелось чего-то особенного, но чтобы это не было слишком дорого. Друзья предложили зайти в магазин с разливными парфюмами. Я раньше о таком не слышала, честно говоря. Да и с парфюмерией в моем возрасте я знакома разве что по телевизору.\n" +
                    "\n" +
                    "Так вот, зашла я в этот магазин, и сразу стало приятно от запаха ванили и чего-то еще сложного. Продавец, видя моё замешательство, предложил попробовать аромат с нотками лаванды и бергамота. Он так увлеченно рассказывал, что я почти забыла, зачем пришла. Но все же решила взять небольшой флакончик на пробу, хотя немного сомневалась, как на это посмотрит муж.\n" +
                    "\n" +
                    "Когда я направилась к выходу, запах напомнил мне о наших путешествиях 20 лет назад. Это было такое сильное чувство, что я даже расчувствовалась. Мы с мужем тогда часто ездили за город по выходным, и было ощущение, будто я снова в автобусе с ним, а солнце светит сквозь стекло... В общем, решила остановиться на этом. Не ожидала, что в таком месте найду частичку прошлого счастья.\n" +
                    "\n" +
                    "Иногда неожиданные вещи оказываются самыми ценными. Эти парфюмы оказались как раз таким случаем.",
            "Самую простую структуру, буквально 4-5 слов в отзыве" + " " +
                    "Пример: Спасибо, были там-то, понравилось. Или - Большой выбор парфюмерии. Можно купить любой объем. Класс",
            "Простую структуру, буквально 5-10 слов в отзыве" +
                    " Пример: Все прошло гладко! Организовали праздник хорошо, развлечения детям понравились, все остались  в довольны.",
            "Упрощенную структуру, буквально 10-15 слов в отзыве" +
                    " Пример: Спасибо за помощь в таком непростом деле!!! Продолжайте в том же духе и пусть всё у вас будет хорошо! Еще пример : Сам не местный, коллеги рассказывали про Жаровню - вкусно )\n" + "Не обманули)\n" + "Все понравилось. Еду принесли быстро, все свежее, горячее. Обслуживала Екатерина, понравилось!"
            );




//    List<String> aspects = List.of(
//            "имени работника компании",
//            "месте расположения",
//            "подробность о товаре",
//            "указание конкретной цены товара"
//    );



    List<String> decorateText = List.of(
            "Дерекорируй текст смайлами, но не в конце текста",
            "Не используй смайлы",
            "Не используй смайлы",
            "Не используй смайлы",
            "Не используй смайлы",
            "Дерекорируй текст смайлами",
            "Не используй смайлы",
            "Не используй смайлы",
            "Не используй смайлы",
            "Не используй смайлы"
    );

    List<Double> temperature = List.of(
            0.5, 0.7, 0.6, 0.65, 0.7, 0.75, 0.7, 0.8, 0.85, 0.7, 0.9
    );


//==================================== НАСТРОЙКИ ТЕКСТОВ - КОНЕЦ ==================================================

    /** Код создания отзывов*/
    public List<Review> toEntityListReviewsFromDTO(OrderDTO orderDTO, OrderDetails orderDetails) {
        List<Review> reviewList = new ArrayList<>();

        List<Bot> bots = findAllBotsMinusFilial(orderDTO, convertFilialDTOToFilial(orderDTO.getFilial()));
//        String siteRaw = websiteParserService.extractTextFromWebsite("parfumerkld.ru");
//
//        int siteTokens = siteRaw != null ? siteRaw.length() : 0;
//        log.info("\uD83C\uDF10 Текст с сайта содержит приблизительно {} токенов", siteTokens);

//        String site = reviewGeneratorService.safeAnalyzeSiteText(siteRaw);
//        String site = siteText;
        String site = parfum;
//        String site = textShablon;
//        String site = "";
//        System.out.println(site);
//        log.info("\uD83D\uDCCB Компактный анализ сайта:\n{}", site);

//        if (site != null && !site.isBlank()) {
//              site = reviewGeneratorService.safeAnalyzeSiteTextNoShablon(site);
//        }
//        System.out.println(site);

        String category = orderDetails.getOrder().getCompany().getSubCategory().getSubCategoryTitle();
        int totalAmount = orderDTO.getAmount();
        System.out.println(category);



        Set<String> uniqueTexts = new LinkedHashSet<>();
        int maxAttempts = 10 * totalAmount;
        int attempts = 0;
        long startTime = System.nanoTime();
        int totalTokenCount = 0;

        while (uniqueTexts.size() < totalAmount && attempts < maxAttempts) {
//            Формирование Промта
            PromptDTO promptDTO = takePromtDTOconverter(site, category);
//            Формирование Промта

            String firstText = reviewGeneratorService.safeGenerateSingleReview(promptDTO);
            int tokens = firstText != null ? firstText.length() : 0;


//            String review = reviewGeneratorService.minusSlova(firstText);
            String review = firstText;
//            System.out.println(firstText);
//            System.out.println(review);

            if (review != null && !review.startsWith("⚠️") && !uniqueTexts.contains(review)) {
                uniqueTexts.add(review);
                totalTokenCount += tokens;
                log.info("➕ Добавлен новый отзыв ({} токенов), текущий счётчик: {}/{}", tokens, uniqueTexts.size(), totalAmount);
            } else {
                log.warn("⚠️ Ошибка, дубликат или неподходящая длина, отзыв не добавлен. Попытка: {}/{}", attempts + 1, maxAttempts);
            }

            attempts++;

            try {
                Thread.sleep(500);
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
        }

        long endTime = System.nanoTime();
        double durationSec = (endTime - startTime) / 1_000_000_000.0;

        if (uniqueTexts.size() < totalAmount) {
            log.error("Не удалось получить нужное количество уникальных отзывов. Есть {} из {} за {} сек после {} попыток",
                    uniqueTexts.size(), totalAmount, String.format("%.2f", durationSec), attempts);
        } else {
            log.info("\uD83D\uDCDD Получено итогово {} уникальных отзывов за {} сек после {} попыток",
                    uniqueTexts.size(), String.format("%.2f", durationSec), attempts);
        }

        log.info("\uD83D\uDCCA Общая оценка количества токенов всех отзывов: {}", totalTokenCount);

        List<String> texts = new ArrayList<>(uniqueTexts).subList(0, Math.min(totalAmount, uniqueTexts.size()));

        for (String text : texts) {
            Review review = toEntityReviewFromDTO(
                    orderDTO.getCompany(),
                    orderDetails,
                    orderDTO.getFilial(),
                    bots,
                    text
            );
            Review saved = reviewService.save(review);
            if (saved != null) {
                reviewList.add(saved);
            } else {
                log.warn("Отзыв не сохранён, возможно, дубликат: {}", review.getText());
            }
        }

        return reviewList;
    }

    private PromptDTO takePromtDTOconverter(String siteText, String subCategory) {
        Double temperature = this.temperature.get(new Random().nextInt(this.temperature.size()));
        System.out.println("Температура отзыва: " + temperature);
        return PromptDTO.builder()
                .system(getSystemPromt())
                .prompt(getPrompt(siteText, subCategory))
                .temperature(temperature)
                .build();
    }


    private String getSystemPromt() {
        String systemText = String.format("""
        Ты %s, %s, %s лет.\s
        Имеешь %s образование, %s, %s
        Стиль твоего текста, который ты напишешь: %s""",
                sex.get(new Random().nextInt(sex.size())), // Ты Мужчина, Женщина
                proffesion.get(new Random().nextInt(proffesion.size())), // Работник, Студент
                olds.get(new Random().nextInt(olds.size())), // Такого-то возраста
                education.get(new Random().nextInt(education.size())), // Образование
                finance.get(new Random().nextInt(finance.size())), // Доход
                socialStatus.get(new Random().nextInt(socialStatus.size())), // Женат, Холост, соц. статус
                styleOfSpeech.get(new Random().nextInt(styleOfSpeech.size())) // Стиль общения
        );
        System.out.println(systemText);
        return systemText;
    }

    private String getPrompt(String siteText, String subCategory) {
        String promptText = String.format("""
        1.Напиши отзыв от первого лица, который мог бы появиться на Яндекс.Картах или 2ГИС.\s
        Основываясь на информации сайта компании, если она есть %s, или на категории деятельности компании: %s Выбери один продукт/услугу и пиши про него\s

        2. Можешь использовать следующие следующие жаргонные слова: %s.
        3. Обязательно используя структуру: %s.
        %s.
        4. Очень важно! Не используй слова и словосочетания - в восторге, превзошло все ожидания, это то, что нам нужно, невероятно, были отзывчивы, атмосферу, были в восторге, просто супер, на высшем уровне, был безупречным, настоящая находка, сразу понял/поняла это то что нужно, был приятно удивлен
        . Строго следи за указанным размером текста отзыва\s
        5. не используй название компании в написании текста отзыва
        6. Используй стиль написания %s.
       \s""",

                siteText, // Информация с сайта
                subCategory, // Категория
//                lengthText.get(new Random().nextInt(lengthText.size())), // Длина текста
                gargon, // Жаргон
                structure.get(new Random().nextInt(structure.size())), // Структура
//                aspects.get(new Random().nextInt(aspects.size())), // Акцент
                decorateText.get(new Random().nextInt(decorateText.size())), // Декорация: смайлы или нет
                styleOfSpeech.get(new Random().nextInt(styleOfSpeech.size())) // Стиль общения
        );
        System.out.println(promptText);
        return promptText;
    }



    private String getRandomAspect() {
        List<String> aspects = List.of(
                "доброжелательный персонал",
                "удобное расположение",
                "качественный сервис",
                "доступные цены",
                "широкий ассортимент",
                "атмосфера уюта",
                "профессионализм сотрудников",
                "быстрое обслуживание",
                "гарантии и возвраты",
                "интересные акции"
        );
        return aspects.get(new Random().nextInt(aspects.size()));
    }

    private String getRandomPrompt(String category, String tone, String site, String aspect) {
        List<String> variants = List.of(
                "Ты обычный человек. Напиши краткий отзыв от первого лица, который мог бы оставить клиент после визита. Категория: %s. Информация: %s. Сделай акцент на: %s. Не используй пафос и рекламу. Просто и по делу.",
                "Напиши отзыв в обычном разговорном стиле, без клише и восторгов. Категория: %s. Акцент: %s. Тональность: %s. Информация о компании: %s.",
                "Сформулируй обычный очень короткий отзыв, который мог бы появиться на Яндекс.Картах или 2ГИС. Не слишком длинный. Категория: %s. Тема: %s. Контекст: %s. Без смайликов."
        );
        String pattern = variants.get(new Random().nextInt(variants.size()));
        return String.format(pattern, category, site, aspect, tone);
    }


    public boolean changeReviewText(Long reviewId) {
        Review review = reviewService.getReviewById(reviewId);
        String site = "";
        PromptDTO promptDTO = takePromtDTOconverter(site, review.getSubCategory().getSubCategoryTitle());
        String text = reviewGeneratorService.safeGenerateSingleReview(promptDTO);
        review.setText(text);
        return reviewService.save(review) != null;
    }

    private Review toEntityReviewFromDTO(
            CompanyDTO companyDTO,
            OrderDetails orderDetails,
            FilialDTO filialDTO,
            List<Bot> bots,
            String textReview // <-- передаём уже готовый текст
    ) {
        var random = new SecureRandom();

        return Review.builder()
                .category(convertCategoryDTOToCompany(companyDTO.getCategoryCompany()))
                .subCategory(convertSubCompanyDTOToSubCompany(companyDTO.getSubCategory()))
                .text(textReview != null ? textReview : "Текст отзыва")
                .answer("")
                .orderDetails(orderDetails)
                .bot(!bots.isEmpty() ? bots.get(random.nextInt(bots.size())) : null)
                .filial(convertFilialDTOToFilial(filialDTO))
                .publish(false)
                .worker(orderDetails.getOrder().getWorker())
                .product(orderDetails.getProduct())
                .price(orderDetails.getProduct().getPrice())
                .build();
    }// Конвертер из DTO для отзыва

































    private List<Bot> findAllBotsMinusFilial(OrderDTO orderDTO, Filial filial){
        List<Bot> bots = botService.getFindAllByFilialCityId(filial.getCity().getId());
        System.out.println("Боты вытащенные из базы по определнному городу: " + bots.size());
        List<Review> reviewListFilial = reviewService.findAllByFilial(filial);

        List<Bot> botsCompany = reviewListFilial.stream().map(Review::getBot).toList();
        System.out.println("Боты вытащенные из базы по определнному городу для удаления: " +  botsCompany.size());
        bots.removeAll(botsCompany);
        System.out.println("Оставшиеся: " + bots.size());
        return bots;
    }

    private Category convertCategoryDTOToCompany(CategoryDTO categoryDTO){ // Конвертер из DTO для категории
        return categoryService.getCategoryByIdCategory(categoryDTO.getId());
    } // Конвертер из DTO для категории
    private SubCategory convertSubCompanyDTOToSubCompany(SubCategoryDTO subCategoryDTO){// Конвертер из DTO для субкатегории
        return subCategoryService.getSubCategoryById(subCategoryDTO.getId());
    } // Конвертер из DTO для субкатегории

    private Filial convertFilialDTOToFilial(FilialDTO filialDTO){// Конвертер из DTO для филиала
        return filialService.getFilial(filialDTO.getId());
    } // Конвертер из DTO для филиала


    private String klishe = "Клишированные фразы, на которые обращает внимание 2гис:"
            + "(Здесь я привожу примеры, а не факт и не все)"
            + "1. Настоятельно рекомендую всем, кто ищет профессиональный подход и высокий уровень сервиса."
            + "2. Превосходный продукт, который полностью оправдал все мои ожидания."
            + "3. Сотрудники компании проявили высочайший уровень профессионализма."
            + "4. Я остался в полном восторге от качества обслуживания, такого сейчас редко встретишь."
            + "5. Покупка стала одним из лучших решений, которые я когда-либо принимал."
            + "6. Этот продукт/услуга — настоящая находка, советую всем!"
            + "7. Сервис оправдал каждую копейку, потраченную на него."
            + "8. Я приятно удивлен, как легко и просто было работать с этой компанией."
            + "9. Качество на высшем уровне, а стоимость приятно радует."
            + "10. Остался только позитивный опыт, с радостью вернусь сюда снова.";


    private String priznakHoroshego= "Признаки хорошего отзыва :1. Упоминание конкретных деталей опыта"

            +"Привезли через два дня, хотя обещали за день..."
            +"Привезли вовремя, всё аккуратно упаковано."
            +"Пиццу привезли тёплой, коробка не помялась, а соус был аккуратно упакован в отдельный контейнер."
            +"В номере отеля была чистая ванная, свежие полотенца, а на столе стояла бутылка воды и комплимент в виде фруктов."
            +"Куртка сшита аккуратно: ни одной торчащей нитки, а цвет точно такой же, как на фото."
            +"Салон начисто пропылесосили, а тряпки часто меняли - не юлозили одной и той же по всему корпусу"
            +"Косметика пришла быстро, всё было запаковано в пупырчатую плёнку, и ни один флакон не протёк."
            +"2. Эмоции и личное мнение"
            +"Телефон реально крутой, камера снимает четко..."
            +"Вкус просто невероятный, особенно шоколадный слой!"
            +"Входная дверь у вас крутая!!!"

            +"3. Лёгкая критика/баланс плюсов и минусов"
            +"Упаковка была слегка помята, но на работоспособность это не повлияло."
            +"Единственный минус — немного маловато крема..."
            +"Цены приятные, но без указателей было немного сложно найти салон"
            +"Маникюр сделали хорошо, но кресло бы вам поудобнее."
            +"Документы оформили быстро, но парковка рядом с офисом — проблема."
            +"(Не на каждый отзыв)"

            +"4. Сравнение с другими"
            +"Раньше стригся рядом с домом, и могу сказать, что эта парикмахерская намного удобнее, даже не смотря на то, что надо немного подольше идти до нее"
            +"Гости просили контакты..." + "(намёк на то, что торт оказался лучше, чем у других)."
            +"(Не в каждом отзыве)"

            +"5. Личное участие"
            +"Менеджер Юлия очень помогла с выбором дизайна..."
            +"Хотелось бы, конечно, инструкцию на русском...";


    private String siteText = "Основываясь на информации сайта компании, если она есть 8 901 6668881 iquest38mailru центр детских развлечений главная день рождения под ключ квесты лазертаг нерф амонг ас картинг о нас 1 бесплатная чайная зона на 30 чел имениннику не тратьтесь аренду кафе и весело отпразднуйте в наших помещениях пока дети играют мы предложим вам фильмы чай настольные игры 2 огромный выбор одном месте хочется разнообразный веселый танцев неоновом танцполе загадок стрельбы анимации пряток шоу эстафет игр  проблема выполним любое желание нашем арсенале огромные площадью до 14 комнат любой персонажаниматор просто колоссальное количество с нами ваш праздник будет очень концентрированным волшебным запоминающимся 3 организация питания зачем тратить минуты а то часы заказ еды беготню по разным магазинам волочить собой пакеты питанием посудой скатертью освободите руки для подарков праздничного торта накроем стол пиццы наггетсы куриные крылышки фри сладости газировку посуду всего за 8000 руб из расчета 10 4 красочные костюмы игроков полного погружения атмосферу праздника подготовили целый гардероб потрясающих реалистичных костюмов например квесте гарри поттер вы встретите легендарную распределяющую шляпу которая подскажет игрокам факультеты облачив их мантии шарфы точьточь как фильме 5 ведущие аниматоры фотографы каждом мероприятии сохранить память детстве празднике ребенка его веселье приключении молодых любящих радостных родителях бесценно наш фотограф сделает большое снимков обработает отправит почту одним архивом от 2500 также вашем распоряжении драйверы настроения веселья 6 мега игровые зоны 520 квадратных метров празднуйте широкую ногу активе 4ре самые большие квест комнаты арены иркутской области выберите категорию страшные новый год школьный выпускной прятки темноте наши преимущества стоимость все развлечения доступны цене любому начинаются 1100 рубчел со скольки лет игроки могут посещать 7 сопровождении взрослых самостоятельно 2е сопровождающих бесплатно ожидать чайной зоне остальные сопровождающие 100 рубчас контакты адреса г иркутск мкн юбилейный 17 ул баррикад 33 ангарск восточная 10а рекомендации правила условия начало др кликайте номеру звоните время 2200 помните пакетное iquest 2015 naigruru используем файлы cookie улучшения вашего опыта сайте подробнее принять отказать детский приближается самый лучший году чтобы получился действительно незабываемым предлагаем взять себя весь организационный процесс проведм детей увлекательные актрами турниры или устроим конкурсы дискотеку дым машиной мыльной пушкой поиграем активные шарады мафию сделаем множество хороших интересных фотографий приходите ждм именно вас пакет длительность часа 40 минут 1я игра актером оно психоз замок дракулы космический корабль among us хагги вагги 2я фотосъемка 500 3я анимация квизы викторины 22 уэнсдей дрифт аmong 4й час дискотека бумажное сахарная вата 68 000 организиция кейтеринг питание пицца нагетсы печенье газвода сок посуда обслуживание пакета расчитана доплата каждого следующего участника 1500 смотреть тематики фото iqiquestcom город iquestmailru виды программ совсем юным авантюристам подойдт пираты ждт ряд испытаний пройдя которые победитель получит долгожданную свободу останется заточении век любителям настоящего волшебства сказочный увлекательный коридоры полные тайн магических приключений ждут своего смелого героя тем кто уже готов к более отважным приключениям подойдет таинственном мрачном замке гостей мир мистики фантастики своими загадочными тайнами неожиданными поворотами первый несколькими концовками побывайте настоящем космическом корабле терпящем бедствие найдите способ восстановить управление забывайте тайном грузе трюме ведь возможно одни этом хотите много юмора дисциплины тюрьма настоящая тюремная камера системой охраны актерами наблюдателями предстоит хорошо попотеть обойти выбраться ребят старше 12 страшный начального уровня это одноименному произведению короля ужасов стивену кингу котором только потрясающие декорации но настоящее сражение самым страшным существом 20го века опытный лоботомия место нужно сойти ума страха продержаться проклятом где обитают ожившие мифы призраки чудовища наконец большой цитадель научная станция ходе провалившихся экспериментов наплодилась целая армия зомби отряд спустится самое пекло этого зла постарается выжить ну хотя бы умереть слишком быстро общие аниматором возраст 4х 20ти человек адрес дорожная 11 популярные арена 20 отчаянные сражения современным оружием мечта любого мальчишки мамы папы хотят при было травм ссадин синяков ли конечно игре бой между командами происходит специальном помещении облачаются жилеты получают лазерные бластеры отправляются поле боя игрок считается раненым когда попадание луча лазера фиксируется сенсорами закрепленными жилете такое ранение абсолютно безопасно безболезненно выигрывает команда наберет больше баллов ранений соперников увлекательная захватывающая требующая ловкости смекалки которую удовольствием взрослые вступайте ряды космических бойцов развлекательных клубах космик забронировать можно можете выбрать короткую 15минутную игру арендовать зал компании 60 встречаем переодеваем проходим технику безопасности родителей размещаем ожидания они посмотреть кино поиграть выбираем настройки делая страшными если пострашнее переживайте комнате опасные участки смягчены поролоном нрф уникальное оружие супергероев яркие способны победить суперзлодея ними легко перекатываться укрытия укрытию стрелять двух рук прикрывать товарищей те перезаряжают сво отличается пейнтбола лазертага высоким уровнем обязательный элемент очки ребенок снимает окончания схватки активное веслое интересное времяпровождение одинаково захватывающее мальчиков так девочек возраста реальности вдохновлнная ролевой игрой мафия выполнена научнофантастической тематике территории ней случайным образом разделяются две команды члены экипажа разгадывающие скрытые среди них предатели знают предатель голосованием ликвидировать персонажа пытаясь выявить предателей помощью дедукции выигрывают им удастся избавиться довести завершения предложенные экипажу заданияголоволомки попадаясь скрытно устранить достаточное членов заказать 89016668881 drift karting бросьте вызов друзьям приди финишу первым внимание три два один старт новейшие легкие электрокары разработанные специально требуют физической силы управления бензиновые обладают той же динамикой вписываются повороты дрифткартинг станет отличным аттракционом празднования дня прекрасный опыт самостоятельного полной специальное устройство задних колес позволяет дрифтить что становится веселым развлечением спецификация режим кмч 910 15 1012 max вес 75 кг подсветка неон 360 разгон сек тормоз ручной трасса работаем круглый крытая наслаждаться высокой скоростью зимой летом ветер дождь снег рады видеть каждый настраеваемые ограничения скорости разные режимы работы мотора позволяют обучаться вождению постепенно наращивая скорость защитные каски первое гонках шлем снабдим залог безопасного скоростного круга мягкие ограждения столкновение трассе да сколько угодно бояться стоит редактируемая надоест наматывать одинаковые круги помощи специальных разделителей всегда отредактировать усложнить трассу 1000 рч проходит снаряжение инструктаж тренирововчные заезды отдых скоростные айквест отличное которое вытянет перенесет другой у стать гонщиком лучшим стрелком побывать волшебником хогвартсе многоемногое другое еще есть instagram добро пожаловать фабрику игрушек playtime выпускающую первые мире говорящие может даже понастоящему живые куклы верите заходите нам сами увидите интересные закоулки лабиринты счастье обращайте внимания персонала нигде видно согласитесь важно главное маленькие плюшевые друзья оченьочень заждались сильно изголодались колво 430 сложность настраиваемая атмосфера мистическая уникальные особенности встреча любимыми персонажами кисси мисси poppy встречали играх кружках футболках ввиде теперь пора повстречать реальной жизни нескольких локаций ждет приключение состоящее множества тематических элементы настроение меняться добрый лучше обнимать злой бежать глаз долой альтернативный сюжет отсылок оригиналу коечто особенное интригующее необычное секретсекрет финале вкусным сытым финалом приключения хогвартса другие";
    private String textNoShablon = "1. Центр детских развлечений предлагает проведение дня рождения под ключ с квестами, лазертагом, нерфом и картингом.\n" +
            "2. Есть бесплатная чайная зона для именинника, огромный выбор развлечений в одном месте, анимационные программы, а также организация питания за дополнительную плату.\n" +
            "3. Есть огромное количество костюмов для полного погружения в атмосферу праздника, аниматоры и фотографы, сохраняющие память о мероприятии.\n" +
            "4. Мега игровые зоны общей площадью 520 квадратных метров, с различными играми и квестами.\n" +
            "5. Дополнительно предлагается развлечение в формате дрифткартинга.\n" +
            "6. Существуют различные квест-комнаты с разнообразными сценариями, включая космический корабль, замок Дракулы и другие тематические приключения.\n" +
            "7. Программы рассчитаны на детей от 4 до 20 лет, где они могут принимать участие в различных играх и экспериментах.\n" +
            "\n" +
            "Контактный номер: 8 901 6668881. Адреса центра: г. Иркутск, мкн. Юбилейный 17, ул. Баррикад 33, Ангарск, Восточная 10а.";
    private String textShablon = "1. Название и адрес филиалов: Центр детских развлечений \"iQuest\", г. Иркутск, ул. Юбилейная 17, ул. Баррикад 33, п. Ангарск, ул. Восточная 10а.\n" +
            "   \n" +
            "2. Основная сфера деятельности: Организация детских праздников с квестами, лазертагом, нерф амонг ас, картингом и другими развлечениями.\n" +
            "   \n" +
            "3. Как давно вы работаете: Центр детских развлечений iQuest работает с 2015 года.\n" +
            "   \n" +
            "4. Что именно вы предлагают: Организацию дней рождения \"под ключ\" с разнообразными развлечениями, анимацией, костюмированными шоу и обслуживанием питания.\n" +
            "   \n" +
            "5. Как выглядит вход: Вход в центр детских развлечений оформлен в стиле фэнтези с элементами интерактивных декораций.\n" +
            "   \n" +
            "6. Интерьер: Просторные игровые зоны, оформленные в различных тематиках, обстановка в стиле магии, приключений и фантастики.\n" +
            "   \n" +
            "7. Парковка и удобства: Парковочные места вблизи центра, чайная зона для родителей, доступ к разнообразным развлечениям на территории.\n" +
            "   \n" +
            "8. Укажи каждый товар и его Цену:\n" +
            "   - Аренда квест-комнаты: от 1100 рублей/человека.\n" +
            "   - Пакетное предложение от: 17500 рублей за набор для 10 человек.\n" +
            "   - Фотосъемка и обработка: от 2500 рублей.\n" +
            "   \n" +
            "9. Хиты продаж: Квесты с актерами, нерф\n" +
            "   \n" +
            "10. Уникальные предложения: Атмосферные развлечения с использованием реалистичных костюмов и интерактивных элементов.\n" +
            "   \n" +
            "11. Имена и должности ключевых сотрудников: Иван, Организатор; Хант, Аниматор; Копи, Фотограф.\n" +
            "   \n" +
            "12. Опыт, специализация: Команда центра имеет опыт в организации праздников с активными развлечениями для детей и подростков.\n" +
            "   \n" +
            "13. Акции и скидки: Скидки на услуги при заказе комплексного праздника, акции в период особых событий.\n" +
            "   \n" +
            "14. Фразы для отзыва: \"Классное место для детей и взрослых!\".\n" +
            "   \n" +
            "15. Цитаты клиентов: \"Дети в восторге от квестов и анимации!\",\n" +
            "   \"Отличное обслуживание и интересные развлечения!\".\n" +
            "   \n" +
            "16. Как происходит заказ: Заказ услуг осуществляется по телефону или через онлайн-форму на сайте.\n" +
            "   \n" +
            "17. Гарантии и возвраты: Гарантируется качество проведения мероприятий, возможность возврата средств в случае отмены заказа.\n" +
            "   \n" +
            "18. Срок выполнения: Сроки выполнения заказа согласовываются индивидуально в зависимости от услуги.\n";


    String parfum = "1. Название и адрес филиалов:\n" +
            "   - Название: Parfumerkld\n" +
            "   - Адреса: \n" +
            "     - ТЦ Сельма, ул. Генерала Челнокова, 11\n" +
            "     - Парковый проспект мира, 84\n" +
            "     - Переулок Виктория, д.1\n" +
            "     - Ул. Любови Шевцовой, 22\n" +
            "     - Гранд Советский прт, 159\n" +
            "\n" +
            "2. Основная сфера деятельности:\n" +
            "   - Продажа разливной парфюмерии и подарочных сертификатов.\n" +
            "\n" +
            "3. Как давно вы работаете:\n" +
            "   - Нет информации.\n" +
            "\n" +
            "4. Что именно вы предлагаете:\n" +
            "   - Широкий выбор ароматов различных категорий и флаконов разного объема.\n" +
            "\n" +
            "5. Как выглядит вход:\n" +
            "   - Нет информации.\n" +
            "\n" +
            "6. Интерьер:\n" +
            "   - Нет информации.\n" +
            "\n" +
            "7. Парковка и удобства:\n" +
            "   - Стоимость доставки по Калининграду - 300₽, бесплатно при заказе от 3000₽. По России - 400₽, при заказе от 4000₽ бесплатно.\n" +
            "\n" +
            "8. Укажи название каждого товара/услуги и их Цену:\n" +
            "   - Наименование и цены отсутствуют в данном тексте.\n" +
            "\n" +
            "9. Хиты продаж:\n" +
            "   - Нет конкретной информации о хитах продаж.\n" +
            "\n" +
            "10. Уникальные предложения:\n" +
            "    - Программа бонусов: при покупке 5 ароматов 6-й аромат в подарок.\n" +
            "    - Бесплатная доставка при заказе от определенной суммы.\n" +
            "\n" +
            "11. Имена и должности ключевых сотрудников:\n" +
            "    - Нет информации.\n" +
            "\n" +
            "12. Опыт, специализация:\n" +
            "    - Продажа разливной парфюмерии и элитных ароматов.\n" +
            "\n" +
            "16. Как происходит заказ:\n" +
            "    - Выбор аромата, его объема, добавление в корзину, оформление заказа с указанием контактных данных.\n" +
            "\n" +
            "18. Срок выполнения:\n" +
            "    - Нет информации о сроках выполнения заказа.\n" +
            "\n" +
            "19. Прочая информация:\n" +
            "    - Продается масляная духи, а также концентраты со стойким качеством.\n" +
            "    - Еженедельные скидки в выходные.\n" +
            "    - Отзывы покупателей доступны на сайте.";


//    List<String> structure = List.of(
//            "Классическую структуру (товары и услуги)\n" +
//                    "Контекст: зачем купили / когда обратились\n" +
//                    "Ожидания: что хотелось получить\n" +
//                    "Факт: что получили на деле\n" +
//                    "Плюсы\n" +
//                    "Минусы (если есть)\n" +
//                    "Вывод / рекомендация\n" +
//                    "\uD83D\uDCDD Пример:\n" +
//                    "Покупала робот-пылесос, чтобы упростить уборку в квартире. Надеялась, что будет справляться с шерстью от кошки. В целом, результатом довольна: уборка стала быстрее. Из плюсов — тихо работает, сам уезжает на базу. Из минусов — иногда застревает под креслом. В целом рекомендую.",
//
//            "Самую простую структуру, буквально 4-5 слов в отзыве" + " Пример: Спасибо, были там-то, понравилось. Или - Большой выбор парфюмерии. Можно купить любой объем. Класс",
//
//            "Структуру \"До — Во время — После\"\n" +
//                    "До: с чем столкнулись, какая была проблема\n" +
//                    "Во время: процесс использования / взаимодействия\n" +
//                    "После: результат / впечатления\n" +
//                    "Общий итог\n" +
//                    "\uD83D\uDCDD Пример:\n" +
//                    "До обращения в клинику долго мучился с зубной болью. Во время приёма врач оказался очень внимательным, объяснил всё подробно. После лечения боль ушла, сделали качественную пломбу. Спасибо! Теперь хожу только сюда.",
//
//            "Самую простую структуру, буквально 4-5 слов в отзыве" + " Пример: Спасибо, были там-то, понравилось. Или - Большой выбор парфюмерии. Можно купить любой объем. Класс",
//
//            "Эмоциональная структура (для отзывов с вовлечением)\n" +
//                    "Эмоция / ощущение до\n" +
//                    "Ожидания / страхи\n" +
//                    "Как всё прошло\n" +
//                    "Что запомнилось\n" +
//                    "Настроение после\n" +
//                    "\uD83D\uDCDD Пример:\n" +
//                    "Очень волновалась перед первым занятием по вокалу. Боялась, что не получится вообще. Но педагог оказалась супер — внимательная, спокойная, с чувством юмора. Через 10 минут я уже пела без стеснения. До сих пор под впечатлением!",
//
//            "Самую простую структуру, буквально 4-5 слов в отзыве" + " Пример: Спасибо, были там-то, понравилось. Или - Большой выбор парфюмерии. Можно купить любой объем. Класс",
//
//            "Структуру Отзыв-описание (для мест, заведений, мероприятий)\n" +
//                    "Где были / когда\n" +
//                    "Обстановка / атмосфера\n" +
//                    "Обслуживание / организация\n" +
//                    "Что понравилось\n" +
//                    "Что можно улучшить\n" +
//                    "Буду ли рекомендовать / вернусь ли\n" +
//                    "\uD83D\uDCDD Пример:\n" +
//                    "Были в этом кафе в выходные. Очень уютно, приятный интерьер. Официант был вежливый, помог с выбором. Особенно понравился десерт с манго. Единственное — пришлось чуть дольше ждать счёт. Но в целом всё супер, придём ещё!",
//
//            "Самую простую структуру, буквально 4-5 слов в отзыве" + " Пример: Спасибо, были там-то, понравилось. Или - Большой выбор парфюмерии. Можно купить любой объем. Класс",
//
//            "Структуру Упрощённая шаблонная структура (1–2 предложения)\n" +
//                    "Что купили / попробовали / посетили\n" +
//                    "Нравится ли и почему\n" +
//                    "Короткий вывод\n" +
//                    "\uD83D\uDCDD Пример:\n" +
//                    "Заказала букет на сайте — привезли точно в срок, цветы свежие. Очень довольна, буду заказывать ещё.",
//
//            "Самую простую структуру, буквально 4-5 слов в отзыве" + " Пример: Спасибо, были там-то, понравилось. Или - Большой выбор парфюмерии. Можно купить любой объем. Класс",
//
//            "Структуру \"5W + 1H\" (Who, What, When, Where, Why, How)\n" +
//                    "Кто пишет отзыв\n" +
//                    "Что купил / заказал\n" +
//                    "Когда и где происходило\n" +
//                    "Зачем это было нужно\n" +
//                    "Как всё прошло\n" +
//                    "Общее мнение\n" +
//                    "\uD83D\uDCDD Пример:\n" +
//                    "Я — мама двоих детей, заказала в этом магазине настольную игру. Заказ оформила в понедельник, в пункте самовывоза была уже на следующий день. Хотела порадовать семью на выходных. Упаковка отличная, детям понравилось — играем всей семьёй. Магазин понравился, буду заказывать ещё.",
//
//            "Структуру \"Проблема — Решение — Результат\" (подходит для услуг и сервисов)\n" +
//                    "Какая была проблема / запрос\n" +
//                    "Почему выбрали именно это решение\n" +
//                    "Как происходил процесс\n" +
//                    "Какой получили результат\n" +
//                    "Оценка / рекомендация\n" +
//                    "\uD83D\uDCDD Пример:\n" +
//                    "Нужно было срочно восстановить данные с жёсткого диска. Обратился в эту компанию по совету друга. Приняли в день обращения, объяснили, что возможно восстановить. Через два дня всё вернули! Очень благодарен — выручили по-настоящему.",
//
//            "Самую простую структуру, буквально 4-5 слов в отзыве" + " Пример: Спасибо, были там-то, понравилось. Или - Большой выбор парфюмерии. Можно купить любой объем. Класс",
//
//            "Структуру \"Ожидание vs Реальность\" (сравнительная и честная)\n" +
//                    "Что ожидал\n" +
//                    "Что обещали (по рекламе / описанию)\n" +
//                    "Что получил на деле\n" +
//                    "Совпало или нет\n" +
//                    "Вывод: разочарование или радость\n" +
//                    "\uD83D\uDCDD Пример:\n" +
//                    "Ожидала от салона просто подравнять волосы. На сайте были фото работ с ровными срезами. В итоге — мастер сделал чуть иначе, чем просила, но получилось даже лучше, чем планировала. Реальность превзошла ожидания — рекомендую!",
//
//            "Самую простую структуру, буквально 4-5 слов в отзыве" + " Пример: Спасибо, были там-то, понравилось. Или - Большой выбор парфюмерии. Можно купить любой объем. Класс",
//
//            "Структуру \"По пунктам (оценка по критериям)\"\n" +
//                    "Качество: ★★★★★\n" +
//                    "Цена / ценность: ★★★★☆\n" +
//                    "Сервис / поддержка: ★★★★★\n" +
//                    "Доставка / оформление / организация: ★★★★☆\n" +
//                    "Итоговое мнение\n" +
//                    "\uD83D\uDCDD Пример:\n" +
//                    "✔ Качество еды отличное: всё свежее и вкусное.\n" +
//                    "✔ По цене — немного выше среднего, но оправдано.\n" +
//                    "✔ Курьер приехал вовремя, вежливый.\n" +
//                    "✔ Упаковка аккуратная, заказ оформили быстро.\n" +
//                    "В целом осталась довольна — буду заказывать ещё.",
//
//            "Самую простую структуру, буквально 4-5 слов в отзыве" + " Пример: Спасибо, были там-то, понравилось. Или - Большой выбор парфюмерии. Можно купить любой объем. Класс",
//
//            "Структуру Мини-история / рассказ (Storytelling)\n" +
//                    "(для живых, эмоциональных, вовлекающих отзывов)\n" +
//                    "Начало — как всё началось, предыстория\n" +
//                    "Конфликт / Ситуация — с чем столкнулись\n" +
//                    "Решение / Помощь — что помогло\n" +
//                    "Конец — чем всё завершилось\n" +
//                    "Мораль / Вывод\n" +
//                    "\uD83D\uDCDD Пример:\n" +
//                    "Переезд — это всегда стресс. Мы не знали, с чего начать: всё было в коробках, дети, собака… Вызвали команду грузчиков через этот сервис. Приехали вовремя, аккуратно упаковали мебель, даже помогли с разборкой кровати. Через пару часов всё было на месте. Впечатление — как будто магия. Спасибо ребятам!",
//            "Простой максимально короткий отзыв в стиле - Спасибо, все понравилось."
//    );
}



