-- Создание таблицы городов
CREATE TABLE IF NOT EXISTS cities (
   city_id BIGINT NOT NULL AUTO_INCREMENT,
   city_title VARCHAR(255) NOT NULL,
    PRIMARY KEY (city_id)
    ) ENGINE=InnoDB;

-- Добавление столбца города в таблицу филиалов и установка связи
ALTER TABLE filial
    ADD COLUMN city_id BIGINT;

ALTER TABLE filial
    ADD INDEX filials_city_fk (city_id ASC),
    ADD CONSTRAINT filials_city_fk
    FOREIGN KEY (city_id)
    REFERENCES cities (city_id)
    ON DELETE SET NULL
    ON UPDATE CASCADE;

-- Добавление столбца города в таблицу ботов и установка связи
ALTER TABLE bots
    ADD COLUMN bot_city_id BIGINT;

ALTER TABLE bots
    ADD INDEX bots_city_fk (bot_city_id ASC),
    ADD CONSTRAINT bots_city_fk
    FOREIGN KEY (bot_city_id)
    REFERENCES cities (city_id)
    ON DELETE SET NULL
    ON UPDATE CASCADE;



INSERT INTO cities (city_title) VALUES ('Россия'),
                                       ('Жигулёвск'),
                                       ('Снежинск'),
                                       ('Кириши'),
                                       ('Краснокаменск'),
                                       ('Гусь-Хрустальный'),
                                       ('Тимашёвск'),
                                       ('Вязьма'),
                                       ('Мегион'),
                                       ('Волжск'),
                                       ('Нерюнгри'),
                                       ('Лысьва'),
                                       ('Черемхово'),
                                       ('Лиски'),
                                       ('Зеленогорск'),
                                       ('Крымск'),
                                       ('Вольск'),
                                       ('Шали'),
                                       ('Щёкино'),
                                       ('Полевской'),
                                       ('Шуя'),
                                       ('Тихвин'),
                                       ('Тихорецк'),
                                       ('Лесосибирск'),
                                       ('Ржев'),
                                       ('Белореченск'),
                                       ('Краснотурьинск'),
                                       ('Избербаш'),
                                       ('Михайловка'),
                                       ('Котлас'),
                                       ('Мелеуз'),
                                       ('Сибай'),
                                       ('Воркута'),
                                       ('Александров'),
                                       ('Павлово'),
                                       ('Искитим'),
                                       ('Асбест'),
                                       ('Лабинск'),
                                       ('Дзержинский'),
                                       ('Сальск'),
                                       ('Кумертау'),
                                       ('Будённовск'),
                                       ('Заречный'),
                                       ('Чистополь'),
                                       ('Белебей'),
                                       ('Берёзовский'),
                                       ('Прохладный'),
                                       ('Ревда'),
                                       ('Гуково'),
                                       ('Фрязино'),
                                       ('Борисоглебск'),
                                       ('Кудрово'),
                                       ('Алексин'),
                                       ('Россошь'),
                                       ('Лениногорск'),
                                       ('Белогорск'),
                                       ('Когалым'),
                                       ('Туапсе'),
                                       ('Сунжа'),
                                       ('Кунгур'),
                                       ('Славянск-на-Кубани'),
                                       ('Нягань'),
                                       ('Клинцы'),
                                       ('Георгиевск'),
                                       ('Урус-Мартан'),
                                       ('Кстово'),
                                       ('Котельники'),
                                       ('Донской'),
                                       ('Ишимбай'),
                                       ('Гудермес'),
                                       ('Ступино'),
                                       ('Белорецк'),
                                       ('Павловский Посад'),
                                       ('Лыткарино'),
                                       ('Горно-Алтайск'),
                                       ('Сосновый'),
                                       ('Дмитров'),
                                       ('Феодосия'),
                                       ('Анжеро-Судженск'),
                                       ('Кирово-Чепецк'),
                                       ('Ишим'),
                                       ('Буйнакск'),
                                       ('Сертолово'),
                                       ('Туймазы'),
                                       ('Белово'),
                                       ('Шадринск'),
                                       ('Биробиджан'),
                                       ('Минусинск'),
                                       ('Чапаевск'),
                                       ('Троицк'),
                                       ('Минеральные Воды'),
                                       ('Наро-Фоминск'),
                                       ('Верхняя Пышма'),
                                       ('Егорьевск'),
                                       ('Выборг'),
                                       ('Новоалтайск'),
                                       ('Елабуга'),
                                       ('Балашов'),
                                       ('Дубна'),
                                       ('Усолье-Сибирское'),
                                       ('Черногорск'),
                                       ('Чайковский'),
                                       ('Кропоткин'),
                                       ('Новотроицк'),
                                       ('Озёрск'),
                                       ('Кинешма'),
                                       ('Бор'),
                                       ('Кузнецк'),
                                       ('Новоуральск'),
                                       ('Всеволожск'),
                                       ('Усть-Илимск'),
                                       ('Юрга'),
                                       ('Ухта'),
                                       ('Геленджик'),
                                       ('Бугульма'),
                                       ('Анапа'),
                                       ('Азов'),
                                       ('Железногорск'),
                                       ('Лобня'),
                                       ('Ивантеевка'),
                                       ('Ейск'),
                                       ('Киселёвск'),
                                       ('Губкин'),
                                       ('Каменск-Шахтинский'),
                                       ('Великие Луки'),
                                       ('Канск'),
                                       ('Глазов'),
                                       ('Бузулук'),
                                       ('Клин'),
                                       ('Чехов'),
                                       ('Мурино'),
                                       ('Соликамск'),
                                       ('Мичуринск'),
                                       ('Магадан'),
                                       ('Сарапул'),
                                       ('Ленинск-Кузнецкий'),
                                       ('Саров'),
                                       ('Серов'),
                                       ('Гатчина'),
                                       ('Воскресенск'),
                                       ('Междуреченск'),
                                       ('Воткинск'),
                                       ('Новокуйбышевск'),
                                       ('Зеленодольск'),
                                       ('Елец'),
                                       ('Ноябрьск'),
                                       ('Тобольск'),
                                       ('Ачинск'),
                                       ('Видное'),
                                       ('Сергиев Посад'),
                                       ('Элиста'),
                                       ('Бердск'),
                                       ('Новошахтинск'),
                                       ('Ногинск'),
                                       ('Арзамас'),
                                       ('Орехово-Зуево'),
                                       ('Северск'),
                                       ('Новый'),
                                       ('Уренгой'),
                                       ('Ханты-Мансийск'),
                                       ('Муром'),
                                       ('Евпатория'),
                                       ('Камышин'),
                                       ('Артём'),
                                       ('Пушкино'),
                                       ('Димитровград'),
                                       ('Жуковский'),
                                       ('Черкесск'),
                                       ('Реутов'),
                                       ('Михайловск'),
                                       ('Первоуральск'),
                                       ('Раменское'),
                                       ('Октябрьский'),
                                       ('Невинномысск'),
                                       ('Ессентуки'),
                                       ('Новомосковск'),
                                       ('Новочебоксарск'),
                                       ('Долгопрудный'),
                                       ('Каспийск'),
                                       ('Назрань'),
                                       ('Нефтеюганск'),
                                       ('Дербент'),
                                       ('Кызыл'),
                                       ('Обнинск'),
                                       ('Рубцовск'),
                                       ('Батайск'),
                                       ('Кисловодск'),
                                       ('Нефтекамск'),
                                       ('Ковров'),
                                       ('Серпухов'),
                                       ('Щёлково'),
                                       ('Коломна'),
                                       ('Березники'),
                                       ('Находка'),
                                       ('Майкоп'),
                                       ('Электросталь'),
                                       ('Пятигорск'),
                                       ('Копейск'),
                                       ('Миасс'),
                                       ('Салават'),
                                       ('Домодедово'),
                                       ('Керчь'),
                                       ('Хасавюрт'),
                                       ('Северодвинск'),
                                       ('Златоуст'),
                                       ('Альметьевск'),
                                       ('Новочеркасск'),
                                       ('Каменск-Уральский'),
                                       ('Петропавловск-Камчатский'),
                                       ('Сызрань'),
                                       ('Волгодонск'),
                                       ('Норильск'),
                                       ('Рыбинск'),
                                       ('Прокопьевск'),
                                       ('Уссурийск'),
                                       ('Одинцово'),
                                       ('Южно-Сахалинск'),
                                       ('Бийск'),
                                       ('Балаково'),
                                       ('Абакан'),
                                       ('Армавир'),
                                       ('Красногорск'),
                                       ('Орск'),
                                       ('Псков'),
                                       ('Дзержинск'),
                                       ('Сыктывкар'),
                                       ('Ангарск'),
                                       ('Старый'),
                                       ('Оскол'),
                                       ('Братск'),
                                       ('Люберцы'),
                                       ('Великий Новгород'),
                                       ('Энгельс'),
                                       ('Шахты'),
                                       ('Королёв'),
                                       ('Петрозаводск'),
                                       ('Комсомольск-на-Амуре'),
                                       ('Благовещенск'),
                                       ('Нижнекамск'),
                                       ('Таганрог'),
                                       ('Нальчик'),
                                       ('Мытищи'),
                                       ('Химки'),
                                       ('Тамбов'),
                                       ('Новороссийск'),
                                       ('Кострома'),
                                       ('Мурманск'),
                                       ('Стерлитамак'),
                                       ('Йошкар-Ола'),
                                       ('Нижневартовск'),
                                       ('Владикавказ'),
                                       ('Архангельск'),
                                       ('Орёл'),
                                       ('Череповец'),
                                       ('Курган'),
                                       ('Вологда'),
                                       ('Саранск'),
                                       ('Подольск'),
                                       ('Смоленск'),
                                       ('Волжский'),
                                       ('Грозный'),
                                       ('Чита'),
                                       ('Калуга'),
                                       ('Нижний Тагил'),
                                       ('Белгород'),
                                       ('Симферополь'),
                                       ('Владимир'),
                                       ('Якутск'),
                                       ('Иваново'),
                                       ('Брянск'),
                                       ('Сургут'),
                                       ('Магнитогорск'),
                                       ('Тверь'),
                                       ('Улан-Удэ'),
                                       ('Курск'),
                                       ('Сочи'),
                                       ('Киров'),
                                       ('Тула'),
                                       ('Астрахань'),
                                       ('Калининград'),
                                       ('Липецк'),
                                       ('Чебоксары'),
                                       ('Пенза'),
                                       ('Балашиха'),
                                       ('Рязань'),
                                       ('Новокузнецк'),
                                       ('Оренбург'),
                                       ('Ставрополь'),
                                       ('Набережные'),
                                       ('Челны'),
                                       ('Томск'),
                                       ('Кемерово'),
                                       ('Ярославль'),
                                       ('Владивосток'),
                                       ('Иркутск'),
                                       ('Ульяновск'),
                                       ('Хабаровск'),
                                       ('Махачкала'),
                                       ('Ижевск'),
                                       ('Барнаул'),
                                       ('Тольятти'),
                                       ('Тюмень'),
                                       ('Саратов'),
                                       ('Волгоград'),
                                       ('Пермь'),
                                       ('Воронеж'),
                                       ('Краснодар'),
                                       ('Омск'),
                                       ('Ростов-на-Дону'),
                                       ('Уфа'),
                                       ('Самара'),
                                       ('Челябинск'),
                                       ('Нижний Новгород'),
                                       ('Красноярск'),
                                       ('Казань'),
                                       ('Екатеринбург'),
                                       ('Новосибирск'),
                                       ('Санкт-Петербург'),
                                       ('Москва');

UPDATE filial
SET city_id = 1;

UPDATE bots
SET bot_city_id = 1;

ALTER TABLE `bots`
    MODIFY COLUMN `bot_active` BOOLEAN;
